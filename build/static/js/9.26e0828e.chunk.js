(this["webpackJsonpdeus.finance"]=this["webpackJsonpdeus.finance"]||[]).push([[9],{560:function(e,a,t){"use strict";t.r(a);var n=t(97),s=t.n(n),o=t(137),i=t(78),l=t(79),r=t(81),c=t(80),d=t(0),u=t.n(d),p=t(175),h=t(8),m=t(136),k=t(134),f=(t(173),t(289),t(290)),w=t(294),b=t(291),g=t(135),v=t(292),S=t(11),O=function(e){Object(r.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).state={isMigPopup:!1,isOldPopup:!1,isConnected:!1,showPopup:!1,staking:{name:"",amount:"",contract:"",coin_name:"",isApprove:!0,showApprove:!0},wallet:{address:null},markets:{dea_price:"",market_cap:"",total_locked:"",fully_duilted:""},stakes:{dea_usdc:{name:"dea_usdc",amounts:{dea:0,newdea:0,apy:0,lp:0,pool:0,currLp:0,allowances:0},coin_name:"UNI-V2-DEA-USDC",stakingLink:"0x2e3394d3CdcbaAF2bb85Fe9aB4c79CeF4d28b216",liqLink:"https://app.uniswap.org/#/add/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/0x80aB141F324C3d6F2b18b030f1C4E95d4d658778",rewardRatio:0},deus_eth:{name:"deus_eth",amounts:{dea:0,newdea:0,apy:0,lp:0,pool:0,currLp:0,allowances:0},coin_name:"UNI-V2-DEUS/ETH",stakingLink:"0x19945547eC934bBD8C48fA69bC78152C468CCA7a",liqLink:"https://app.uniswap.org/#/add/ETH/0x3b62F3820e0B035cc4aD602dECe6d796BC325325",rewardRatio:0},deus:{name:"deus",amounts:{dea:0,newdea:0,apy:0,lp:0,pool:0,currLp:0,allowances:0},isDeusLink:!0,coin_name:"DEUS",stakingLink:"0x15Cd5DDB1ca1A2B87B17e4fc728d904A5B43D246",liqLink:"/swap",rewardRatio:0},ampl_eth:{name:"ampl_eth",amounts:{dea:0,newdea:0,apy:0,lp:0,pool:0,currLp:0,allowances:0},coin_name:"UNI-V2-AMPL-ETH",stakingLink:"0xa3bE45e9F6c42e06231618cf45be1AB9625A591f",liqLink:"https://app.uniswap.org/#/add/ETH/0xd46ba6d942050d489dbd938a2c909a5d5039a161",rewardRatio:0},snx:{name:"snx",amounts:{dea:0,newdea:0,apy:0,lp:0,pool:0,currLp:0,allowances:0},coin_name:"SNX",stakingLink:"0x1B043BbB372452d71503E6603Dd33b93271Bfec0",liqLink:"https://app.uniswap.org/#/swap?outputCurrency=0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f",rewardRatio:0},uni:{name:"uni",amounts:{dea:0,newdea:0,apy:0,lp:0,pool:0,currLp:0,allowances:0},coin_name:"UNI",stakingLink:"0x8cd408279e966b7e7e1f0b9e5ed8191959d11a19",liqLink:"https://app.uniswap.org/#/swap?outputCurrency=0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",rewardRatio:0}}},n.handleResize=function(){return n.handleScroller()},n.handleScroller=function(){var e=(2300-window.innerWidth)/2;n.scrollRef.current&&(n.scrollRef.current.scrollLeft=e)},n.handleStakeState=function(e){if("receipt"===e||"error"===e)return n.setState({SwapState:null}),void n.notify(e);n.notify(e)},n.notify=function(e){var a=n.state.staking;switch(e){case"waiting":m.b.info("Waiting for Metamask confirmation.",{position:m.b.POSITION.BOTTOM_RIGHT});break;case"transactionHash":m.b.info("Transaction broadcasted.",{position:m.b.POSITION.BOTTOM_RIGHT});break;case"receipt":m.b.success("Transaction Successful.",{position:m.b.POSITION.BOTTOM_RIGHT}),a.isApprove?(a.isApprove=!1,n.setState({staking:a})):n.handlePopup(a.name,!1),n.getTokenAllAmounts(a.name);break;case"connectWallet":m.b.warn("Please Connect Wallet.",{position:m.b.POSITION.BOTTOM_RIGHT});break;case"error":m.b.warn("Transaction Failed.",{position:m.b.POSITION.BOTTOM_RIGHT});break;default:m.b.info("Unhandled Event.",{position:m.b.POSITION.BOTTOM_RIGHT})}},n.initial=function(){console.log("initial called");var e=n.state.stakes;for(var a in e)n.getTokenAllAmounts(a)},n.getTokenAllAmounts=function(e){console.log("initial called for \t"+e);var a=n.state.stakes,t=a[e];p.e(t.name).then((function(e){t.amounts.lp=Object(h.a)(e),n.setState({stakes:a}),p.f(t.name).then((function(e){t.amounts.pool="0"===t.amounts.lp||"0"===e?0:t.amounts.lp/e*100,n.setState({stakes:a}),p.d(t.name).then((function(e){t.amounts.dea=Object(h.a)(e),t.rewardRatio=t.amounts.pool*k.b/100,t.amounts.newdea=Object(h.a)(parseFloat(e)+k.a/k.c*t.rewardRatio*.89539),n.setState({stakes:a})}))}))})),p.g(t.name).then((function(e){t.amounts.currLp=Object(h.a)(e),n.setState({stakes:a})})),p.c(t.name).then((function(e){t.amounts.allowances=Object(h.a)(e),n.setState({stakes:a})}))},n.getMarketAmounts=Object(o.a)(s.a.mark((function e(){var a,t,o,i,l,r,c,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n.state,t=a.stakes,o=a.markets,e.next=4,fetch("https://app.deus.finance/static-api.json");case 4:return i=e.sent,e.next=7,i.json();case 7:l=e.sent,r=l.apy,c=l.market,e.t0=s.a.keys(r);case 11:if((e.t1=e.t0()).done){e.next=18;break}if(d=e.t1.value,t[d]){e.next=15;break}return e.abrupt("continue",11);case 15:t[d].amounts.apy=parseFloat(r[d]).toFixed(2),e.next=11;break;case 18:for(u in c)o[u]=parseFloat(c[u]);n.setState({stakes:t}),e.next=25;break;case 22:e.prev=22,e.t2=e.catch(0),console.log(" get Market Amounts had some error",e.t2);case 25:case"end":return e.stop()}}),e,null,[[0,22]])}))),n.handleUpdateDEA=function(){return setInterval((function(){var e=n.state.stakes,a=function(a){var t=e[a];p.d(t.name).then((function(a){t.amounts.dea=Object(h.a)(parseFloat(a)),t.amounts.newdea=Object(h.a)(parseFloat(a)+k.a/k.c*t.rewardRatio*.89539),n.setState({stakes:e})}))};for(var t in e)a(t)}),1e3*k.a)},n.handleStake=function(){var e=n.state.staking;console.log(e.amount),p.h(e.name,e.amount,n.handleStakeState)},n.lastPopupID=function(e){return localStorage.getItem(e)},n.handleApprove=function(){var e=n.state.staking;console.log(e.amount),p.a(e.name,e.amount,n.handleStakeState)},n.handleClaim=function(e){p.i(e,0,n.handleStakeState);var a=n.state.staking;a.name=e,n.setState({staking:a}),console.log("0 handleClaim clicked")},n.isMigToken=function(e){return"ampl_eth"===e||"uni"===e||"snx"===e},n.handleWithdraw=function(e,a){console.log("withdraw"+a);var t=n.state.staking;t.name=e,n.setState({staking:t}),p.i(e,a,n.handleStakeState)},n.handleLP=function(e){console.log(e+" handleLP clicked")},n.isConnected=function(){if(window.ethereum){if(window.ethereum.selectedAddress){var e=n.state.wallet;e.address=window.ethereum.selectedAddress,n.setState({wallet:e,isConnected:!0}),n.handleScroller()}window.ethereum.isMetaMask&&n.setState({isMetamask:!0})}n.initial()},n.setStakingAmount=function(e){var a=n.state.staking;a.amount=e,n.setState({staking:a})},n.handleConnectWallet=Object(o.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.b((function(){return console.log("connected")}));case 3:a=e.sent,console.log(a?"connected to metamask":""),n.isConnected(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("didnt connect to metamask \t"+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.showAddress=function(){var e=n.state.wallet.address;return e.substring(0,6)+"..."+e.substring(e.length-4,e.length)},n.handleMaxLP=function(e){var a=n.state.staking;a.amount=e,n.setState({staking:a})},n.closeOldPopup=function(){n.setState({isOldPopup:!1})},n.handlePopup=function(e,a){if(console.log(e),n.isMigToken(e))n.setState({isOldPopup:!0});else{var t=n.state.staking,s=n.state.stakes[e];a&&(t.contract=""+s.stakingLink,t.coin_name=s.coin_name,n.getTokenAllAmounts(e),t.isApprove=!(s.amounts.allowances>1e5),t.showApprove=!(s.amounts.allowances>1e5),t.name=e),t.amount="",n.setState({showPopup:a,staking:t})}},n.handleMigPupop=function(e){n.setState({isMigPopup:e})},n.oldPoolsPupup=u.a.createElement("div",{className:"old-pools-popup"},u.a.createElement("div",{className:"popup-wrap"},u.a.createElement("div",{className:"close-btn",onClick:n.closeOldPopup},"x"),u.a.createElement("div",{className:"title"},"We migrated to new pools!"),u.a.createElement("div",{className:"btns-wrap"},u.a.createElement("a",{className:"btns",href:"https://t.me/deusfinance",target:"_blank",rel:"noopener noreferrer"},"discuss this in telegram"),u.a.createElement(S.b,{to:"/staking",className:"btns"},"show me the new pools")))),n.scrollRef=u.a.createRef(),n}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="DEUS staking",setTimeout((function(){return e.isConnected()}),1e3),setTimeout((function(){return e.handleScroller()}),100),this.handleUpdateDEA(),this.getMarketAmounts(),setInterval((function(){return e.getMarketAmounts()}),4e4),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.state,a=e.isConnected,t=e.stakes,n=e.staking,s=e.showPopup,o=e.isMigPopup,i=e.isOldPopup,l=e.markets,r=u.a.createElement(S.b,{to:"/staking",className:"pool-link"}," new pools");return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,i?this.oldPoolsPupup:""),u.a.createElement(v.a,{isMigPopup:o,handleMigPupop:this.handleMigPupop}),u.a.createElement(m.a,null),u.a.createElement(b.a,{showPopup:s,staking:n,stakes:t,handlePopup:this.handlePopup,handleMaxLP:this.handleMaxLP,setStakingAmount:this.setStakingAmount,handleApprove:this.handleApprove,handleStake:this.handleStake}),u.a.createElement(f.a,{isConnected:a,handleConnectWallet:this.handleConnectWallet}),u.a.createElement(w.a,{markets:l,stakes:t,isConnected:a,scrollRef:this.scrollRef,handleScroller:this.handleScroller,handleConnectWallet:this.handleConnectWallet,showAddress:this.showAddress,handlePopup:this.handlePopup,handleClaim:this.handleClaim,handleLP:this.handleLP,orders:{tokens:["dea_usdc","deus_eth","deus","ampl_eth","snx","uni"],shadows:["blue-200-shadow","yellow-400-shadow","blue-200-shadow","yellow-400-shadow","yellow-300-shadow","blue-200-shadow"]},handleWithdraw:this.handleWithdraw,poolsLink:r}),u.a.createElement(g.a,{classes:"social"}))}}]),t}(d.Component);a.default=O}}]);
//# sourceMappingURL=9.26e0828e.chunk.js.map